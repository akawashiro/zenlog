- Implement nolog.

- Detect crash and start /bin/sh instead.
- Stop using os.Exit(), since it won't run defer'ed calls.

- Refactor subcommands and add tests.

- Port the end-to-end tests.
