#!/bin/bash

cat <<'EOF'

#==============================================================================
# Basic Zenlog bash helper functions.
#
# Add the following line to your $HOME/.bashrc file.
#
# . <(zenlog sh-helper)
#==============================================================================

function _zenlog_just_run() {
  "${@}"
}

# Run a command without logging the output.
alias 184=_zenlog_just_run

# Run a command with forcing log, regardless of ZENLOG_ALWAYS_NO_LOG_COMMANDS.
alias 186=_zenlog_just_run

# Print the current command's command line.  Use with "zenlog start-command".
function bash_last_command() {
  # Use echo to remove newlines.
  HISTTIMEFORMAT= history 1 | sed -e 's/^ *[0-9][0-9]* *//'
}

function bash_dump_env() {
  {
    echo "PWD: $(pwd)"
    echo "git HEAD: $(git rev-parse HEAD) $(git rev-parse --abbrev-ref HEAD)"
    env # dump environmental variables.
    # declare -p # this dumps shell variables too, but also functions, and may be too big.
  } 2>/dev/null
}

# If called from the login shell, then close the current zenlog session and restart zenlog.
function zenlog_restart() {
    if zenlog in-zenlog; then
        exit 13
    else
        echo "Not in zenlog." 1>&2
    fi
}

# For backward compatibility.
function zenlog_in_zenlog() {
  zenlog in-zenlog
}

# For backward compatibility.
function in_zenlog() {
  zenlog in-zenlog
}

# For backward compatibility.
function zenlog_current_log() {
  zenlog current-log "$@"
}

# For backward compatibility.
function zenlog_last_log() {
  zenlog last-log "$@"
}

EOF
